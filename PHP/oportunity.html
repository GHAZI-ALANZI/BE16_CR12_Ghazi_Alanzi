<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Show all users</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">

<script src="https://kit.fontawesome.com/fa383714fa.js" crossorigin="anonymous"></script>
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-dark text-light">
        <div class="container-fluid">
            <a class="navbar-brand text-light" href="index.php"><i class="fa-solid fa-city"></i> La casa mia</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active text-light " aria-current="page" href="index.php">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-light" href="displayAll.php">API</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-light" href="oportunity.html">Oportunity</a>
                    </li>
    
                </ul>
            </div>
        </div>
    </nav>

    <div class="container px-4 px-lg-5 mt-5" > 
    <div class="row gx-4 gx-lg-4 row-cols-md-3 row-cols-xl-4 "id="contain">
    </div>
        


  
    
        
    
            

   <script>
     

       function reduction() {
           const request = new XMLHttpRequest(); 
           request.open("GET", "displayAll.php", true); 
           request.onload = function () {
               if (this.status == 200) {
                   let oportunity = JSON.parse(this.responseText); 
                   let result = ''; 
                   
                   for (let i in oportunity) {
if(oportunity[i].reduction=="Yes"){//*** only show the ones with a price reduction***************************
                       result += `<div class="col mb-5">
            <a class="card text-decoration-none" href="details.php?id=${oportunity[i].id}">
               
                <div class="overflow-hidden shadow product-holder">
                    <img class="card-img-top w-100 product-cover"
                    src="..\\picture\\${oportunity[i].image} "
                        alt="..." />
                </div>
               
                <div class="card-body p-4">
                    <h5 class="card-title w-100 font-weight-bolder">${oportunity[i].address}
</h5>
                    <p class="m-0">Area ${oportunity[i].area} &#13217</p>
                    <p class="m-0">Price ${oportunity[i].price} $</p>
                    <p class="m-0">reduction ${oportunity[i].reduction} </p>

                 
                </div>
            </a>
        </div>

    </div>

    `; }
                   }


                   document.getElementById('contain').innerHTML = result; 
                   
               }
           }
           request.send(); 
       }reduction() 
   </script>




<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous">
</script> 

</body>
</html>




